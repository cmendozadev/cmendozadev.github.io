(function(){"use strict";var e={5114:function(e,t,r){var o=r(9242),n=r(3396);const s={id:"app"};function a(e,t){const r=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(r)])}var i=r(89);const u={},c=(0,i.Z)(u,[["render",a]]);var l=c,d=r(2483);const p={id:"default-layout"};function m(e,t,r,o,s,a){const i=(0,n.up)("navbar-layout"),u=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",p,[(0,n.Wm)(i,{user:s.user},null,8,["user"]),(0,n.Wm)(u)])}r(7658);var h=r(4161);const g={NODE_ENV:"production",BASE_URL:"/vuejs-github/"}.VUE_APP_API_ENDPOINT||"http://localhost:8080/Yii2-Vue/web/";let f={baseURL:`${g}api/`};const v=h.Z.create(f),w=e=>(e.headers.Authorization=`Bearer ${D.getToken()}`,e);v.interceptors.request.use(w),v.interceptors.response.use((e=>e),(e=>(401===e.response.status&&Te.push({name:"login"}),Promise.reject(e))));var _=v;const y=_;var b=y;const N={user:null,async login(e){try{const{status:t,data:r}=await b.post("user/login",e);if(200===t)return this.setUser(r),{success:!0}}catch(t){return{success:!1,errors:t.response.data.errors}}},async register(e){try{const{status:t,data:r}=await b.post("user/register",e);if(200===t)return this.setUser(r),{success:!0}}catch(t){return{success:!1,errors:t.response.data.errors}}},async getCurrentUser(){if(!this.user){const{status:e,data:t}=await b.post("user/data");200===e&&(this.user=t)}return this.user},setUser(e){this.user=e,localStorage.setItem("ACCESS_TOKEN",e.access_token)},isLoggedIn(){return!!localStorage.getItem("ACCESS_TOKEN")},getToken(){return localStorage.getItem("ACCESS_TOKEN")},logout(){localStorage.removeItem("ACCESS_TOKEN"),Te.push({name:"/login"})}};var k=N;const C=k;var D=C,O=r(7139);const L={class:"navbar"};function U(e,t,r,o,s,a){return(0,n.wg)(),(0,n.iD)("div",L,[(0,n.Uk)(" Welcome "+(0,O.zw)(r.user.username)+" ",1),(0,n._)("a",{href:"",onClick:t[0]||(t[0]=(...e)=>a.logout&&a.logout(...e))},"Logout")])}var A={name:"NavbarLayout",props:{user:Object},methods:{logout(){D.logout()}}};const E=(0,i.Z)(A,[["render",U],["__scopeId","data-v-c9eb42fe"]]);var I=E,S={name:"DefaultLayout",components:{NavbarLayout:I},data(){return{user:{}}},async beforeMount(){this.user=await D.getCurrentUser()}};const j=(0,i.Z)(S,[["render",m],["__scopeId","data-v-2a105dc9"]]);var T=j;const V={id:"auth-layout"};function Z(e,t,r,o,s,a){const i=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",V,[(0,n.Wm)(i)])}var $={name:"AuthLayout"};const W=(0,i.Z)($,[["render",Z]]);var x=W;const P={class:"form-wrapper"},Y=(0,n._)("h3",null,"Login to create notes",-1),K={key:0,class:"errors"},M=(0,n._)("br",null,null,-1),z=(0,n._)("br",null,null,-1),B=(0,n._)("button",null,"Login",-1);function H(e,t,r,s,a,i){const u=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",P,[Y,(0,n._)("form",{onSubmit:t[2]||(t[2]=(0,o.iM)(((...e)=>i.login&&i.login(...e)),["prevent"])),action:""},[a.errors?((0,n.wg)(),(0,n.iD)("div",K,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.errors,((e,t)=>((0,n.wg)(),(0,n.iD)("p",{key:t},(0,O.zw)(e[0]),1)))),128))])):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.username=e),placeholder:"Your username"},null,512),[[o.nr,a.form.username]]),M,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.password=e),placeholder:"Your password"},null,512),[[o.nr,a.form.password]]),z,B,(0,n.Wm)(u,{to:"/register",class:"link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Click here to register")])),_:1})],32)])}var R={name:"LoginView",data(){return{form:{username:"",password:""},errors:null}},methods:{async login(){const{success:e,errors:t}=await D.login(this.form);e&&this.$router.push({name:"home"}),this.errors=t}}};const q=(0,i.Z)(R,[["render",H]]);var F=q;const X={class:"form-wrapper"},G=(0,n._)("h3",null,"Register and create notes",-1),J={key:0,class:"errors"},Q=(0,n._)("br",null,null,-1),ee=(0,n._)("br",null,null,-1),te=(0,n._)("br",null,null,-1),re=(0,n._)("button",null,"Register",-1);function oe(e,t,r,s,a,i){const u=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",X,[G,(0,n._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...e)=>i.register&&i.register(...e)),["prevent"])),action:""},[a.errors?((0,n.wg)(),(0,n.iD)("div",J,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.errors,((e,t)=>((0,n.wg)(),(0,n.iD)("p",{key:t},(0,O.zw)(e[0]),1)))),128))])):(0,n.kq)("",!0),(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.form.username=e),placeholder:"Your username"},null,512),[[o.nr,a.form.username]]),Q,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.form.password=e),placeholder:"Your password"},null,512),[[o.nr,a.form.password]]),ee,(0,n.wy)((0,n._)("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=e=>a.form.password_repeat=e),placeholder:"Repeat password"},null,512),[[o.nr,a.form.password_repeat]]),te,re,(0,n.Wm)(u,{to:"/login",class:"link"},{default:(0,n.w5)((()=>[(0,n.Uk)("Click here to login")])),_:1})],32)])}var ne={name:"RegisterView",data(){return{form:{username:"",password:"",password_repeat:""},errors:null}},methods:{login(){console.log("Login",this.form)},async register(){const{success:e,errors:t}=await D.register(this.form);e?this.$router.push({name:"home"}):this.errors=t}}};const se=(0,i.Z)(ne,[["render",oe]]);var ae=se;const ie={class:"home"};function ue(e,t,r,o,s,a){const i=(0,n.up)("notes-list");return(0,n.wg)(),(0,n.iD)("div",ie,[(0,n.Wm)(i)])}const ce={class:"tc-notes-wrapper"},le={class:"tc-notes"};function de(e,t,r,o,s,a){const i=(0,n.up)("add-new-button"),u=(0,n.up)("note-item");return(0,n.wg)(),(0,n.iD)("div",ce,[(0,n.Wm)(i,{onAddNote:a.addNote},null,8,["onAddNote"]),(0,n._)("div",le,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.notes,((e,t)=>((0,n.wg)(),(0,n.j4)(u,{key:t,note:e,onDeleteNote:a.deleteNote,onUpdateNote:a.updateNote},null,8,["note","onDeleteNote","onUpdateNote"])))),128))])])}r(541);function pe(e,t,r,o,s,a){return(0,n.wg)(),(0,n.iD)("button",{onClick:t[0]||(t[0]=(...e)=>a.addNote&&a.addNote(...e)),class:"new-note-btn"},"Add Note")}var me={name:"AddnewButton",methods:{addNote(){this.$emit("addNote")}}};const he=(0,i.Z)(me,[["render",pe],["__scopeId","data-v-aba05e08"]]);var ge=he;const fe={class:"tc-note"},ve={class:"tc-note-header"};function we(e,t,r,o,s,a){return(0,n.wg)(),(0,n.iD)("div",fe,[(0,n._)("div",ve,[(0,n._)("span",{onClick:t[0]||(t[0]=(...e)=>a.deleteNote&&a.deleteNote(...e)),class:"tc-note-close"}," X ")]),(0,n._)("div",{class:"tc-note-title",contenteditable:"",onBlur:t[1]||(t[1]=(...e)=>a.titleChanged&&a.titleChanged(...e))},(0,O.zw)(r.note.title),33),(0,n._)("div",{class:"tc-note-body",contenteditable:"",onBlur:t[2]||(t[2]=(...e)=>a.bodyChanged&&a.bodyChanged(...e))},(0,O.zw)(r.note.body),33)])}var _e={name:"NoteItem",props:{note:{type:Object,required:!0}},data(){return{note_item:this.note}},methods:{titleChanged(e){this.note_item.title=e.target.innerHTML,this.$emit("updateNote",this.note_item)},bodyChanged(e){this.note_item.body=e.target.innerHTML,this.$emit("updateNote",this.note_item)},deleteNote(){this.$emit("deleteNote",this.note_item)}}};const ye=(0,i.Z)(_e,[["render",we],["__scopeId","data-v-0f79c29f"]]);var be=ye;const Ne={create(e){return b.post("notes",e)},get(){return b.get("notes?sort=-created_at")},update(e){return b.put(`notes/${e.id}`,e)},delete(e){return b.delete(`notes/${e}`)}};var ke=Ne;const Ce=ke;var De=Ce,Oe={name:"NotesList",components:{NoteItem:be,AddNewButton:ge},data(){return{notes:[]}},methods:{async addNote(){const{status:e,data:t}=await De.create({title:"",body:""});201===e&&this.notes.unshift(t)},async updateNote(e){await De.update(e)},async deleteNote(e){const{status:t}=await De.delete(e.id);204===t&&this.notes.splice(this.notes.indexOf(e),1)}},async beforeMount(){const{status:e,data:t}=await De.get();200===e&&(this.notes=t)}};const Le=(0,i.Z)(Oe,[["render",de]]);var Ue=Le,Ae={name:"HomeView",components:{NotesList:Ue}};const Ee=(0,i.Z)(Ae,[["render",ue]]);var Ie=Ee;const Se=[{path:"/",name:"default",redirect:"home",component:T,children:[{path:"home",name:"home",component:Ie}]},{path:"/auth",name:"Auth",component:x,children:[{path:"login",name:"login",component:F},{path:"register",name:"register",component:ae}]},{path:"/login",redirect:"/auth/login"},{path:"/register",redirect:"/auth/register"}],je=(0,d.p7)({history:(0,d.PO)("/vuejs-github/"),routes:Se});je.beforeEach(((e,t,r)=>{"home"!==e.name||D.isLoggedIn()||r({name:"login"}),D.isLoggedIn()&&"home"!==e.name&&r({name:"home"}),r()}));var Te=je;(0,o.ri)(l).use(Te).mount("#app")}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,s){if(!o){var a=1/0;for(l=0;l<e.length;l++){o=e[l][0],n=e[l][1],s=e[l][2];for(var i=!0,u=0;u<o.length;u++)(!1&s||a>=s)&&Object.keys(r.O).every((function(e){return r.O[e](o[u])}))?o.splice(u--,1):(i=!1,s<a&&(a=s));if(i){e.splice(l--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[o,n,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,s,a=o[0],i=o[1],u=o[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(u)var l=u(r)}for(t&&t(o);c<a.length;c++)s=a[c],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(l)},o=self["webpackChunkvuejs"]=self["webpackChunkvuejs"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(5114)}));o=r.O(o)})();
//# sourceMappingURL=app.289540ee.js.map